<style>
  .slider-video {
    position: relative;
    padding-top: 52%;
    width: 100%;
  }

  .slider-video video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>

<div class="owl-carousel video-slider">
  {% for block in section.blocks %}
    <div class="video-slide">
      <h3>{{ block.settings.video_title }}</h3>
      {% if block.settings.video_file != blank %}
        <div class="slider-video">
          <video controls playsinline autoplay muted loop>
            <source src="{{ block.settings.video_file | file_url }}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      {% else %}
        <p>No video uploaded</p>
      {% endif %}
    </div>
  {% endfor %}
</div>

{% schema %}
{
  "name": "Video Slider",
  "settings": [],
  "blocks": [
    {
      "type": "video",
      "name": "Video",
      "settings": [
        {
          "type": "text",
          "id": "video_title",
          "label": "Video Title",
          "default": "My Video"
        },
        {
          "type": "url",
          "id": "video_file",
          "label": "Upload Video"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Video Slider",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<script>
  document.addEventListener("DOMContentLoaded", function () {
    $(".video-slider").owlCarousel({
      loop: true,
      margin: 10,
      nav: true,
      dots: true,
      autoplay: true,
      autoplayTimeout: 5000,
      autoplayHoverPause: true,
      responsive: {
        0: { items: 1 },
        600: { items: 1 },
        1000: { items: 1 }
      }
    });
  });
</script>
